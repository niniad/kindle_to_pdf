# Kindle自炊自動化システム セットアップ＆実行ガイド

## 1. 環境構築

### 必要なライブラリのインストール
コマンドプロンプトまたはターミナルで以下のコマンドを実行してください。

```bash
pip install -r requirements.txt
```

### Google Cloud Projectの設定
1.  [Google Cloud Console](https://console.cloud.google.com/) にアクセスし、新しいプロジェクトを作成します。
2.  「APIとサービス」 > 「ライブラリ」から **Google Drive API** を検索し、有効化します。
3.  「APIとサービス」 > 「認証情報」に移動し、「認証情報を作成」をクリックして「OAuth クライアント ID」を選択します。アプリケーションの種類は「デスクトップ アプリ」を選び、任意の名前（例: `Kindle OCR Client`）を付けて作成します。
4.  作成した認証情報のJSONファイルをダウンロードし、ファイル名を `credentials.json` に変更して、このプロジェクトのフォルダ（`capture.py`と同じ場所）に配置します。
5.  「OAuth 同意画面」を設定し、テストユーザーとして自分のGoogleアカウントを追加します（これをしないと認証エラーになる場合があります）。

## 2. 実行手順

### ステップ1: 自動撮影 (Capture)
1.  Kindle for PCを起動し、撮影したい書籍を開きます。
2.  `capture.py` を実行します。
    ```bash
    python capture.py
    ```
3.  「10秒以内にKindleを開いて全画面にしてください」と表示されるので、Kindleを全画面表示にして待機します。
4.  自動的にスクリーンショット撮影とページめくりが行われます。
    *   **中断する場合:** マウスカーソルを画面の四隅（左上など）に素早く移動させると強制終了します。

### ステップ2: OCR & Markdown生成 (Processor)
1.  撮影が完了したら、`ocr_processor.py` を実行します。
    ```bash
    python ocr_processor.py
    ```
2.  初回実行時はブラウザが開き、Googleアカウントの認証を求められます。許可してください。
3.  `captured_images` フォルダ内の画像が順次処理され、`output.md` が生成されます。

## 注意事項
*   **OCR精度:** Google DriveのOCR機能に依存します。縦書きや複雑なレイアウトの場合、認識順序が前後することがあります。
*   **API制限:** 短時間に大量のリクエストを送ると制限にかかる可能性があるため、スクリプト内で待機時間を設けています。
*   **画像削除:** OCR処理のためにGoogle Driveにアップロードされた一時ファイルは自動的に削除されます。
